## DNS

将网站的域名解析为ip地址叫做DNS解析

#### 域名

. 根域名

.com .org 顶级域名 或者一级域名

youzan.com 二级域名

#### 域名解析的过程

host文件 ->设备缓存 -> 本地域名服务器缓存 -> 本地域名服务器迭代查询

#### DNS查询过程

本地域名服务器 -> 根域名服务器 （返回相应的顶级域名服务器）

本地域名服务器 -> 顶级域名服务器 （返回相应的二级域名服务器）

.... 依次类推

### ARP

根据目标IP地址获取下一个将要接受数据报设备的MAC地址

#### 工作机制

A主机为了获得B主机的MAC地址，向链路中广播一个ARP请求包， 链路中的主机收到请求包时比较自己的ip地址和请求包中的ip地址是否相同，如果相同的话就把自己的MAC地址返回给A主机。

（如果目标ip地址和当前发送方不在一个网络，则发送到默认网关）

#### ARP缓存

arp -a

#### 默认网关

如果目标ip和当前主机不在一个网络， 则发送到默认网关，由默认网关进行转发。

### ICMP 

确认IP包是否成功送达目标地址，通知在发送过程中IP包被抛弃的的具体原因。

#### 主要的ICMP消息

##### 目标不可达

可能是因为主机未加入到网络， 或者需要分片但是设置了不允许分片（MTU探索）

##### 重定向消息

如果发送端使用的不是最优的路径发送数据，路由器会返回一个ICMP重定向

##### 超时消息

IP包的TTL为0时，会发送一个ICMP超时消息给发送端主机

设置TTL的目的在于， 当路由控制遇到问题发生循环状况时， 避免IP包被无休止的发送

##### 回送消息

判断发送的数据包是否成功到达对端

用的是 ICMP echo request 和 ICMP echo reply， ping命令

### DHCP

设备加入网络时自动分配IP地址， 设置子网掩码。

### NAT

NAT是用于在本地网络中使用私有地址，在连接互联网时转而使用全局IP地址的技术

NAPT：包含端口号一起转换

LAN中的主机请求互联网中的资源时， 路由器会将源IP和源端口映射成 全局IP+路由器分配的一个端口，再转发到互联网。

### IP隧道